<!DOCTYPE html>
<html>
<head>
    <title>2.1.3 Scrollable Advertising Window</title>
</head>
<body>
    <h1>Scrollable Advertising Window</h1>
    <button onclick="openAdvertisingWindow()">Open Advertisement</button>

    <script>
        function openAdvertisingWindow() {
            // Open child window
            var adWindow = window.open(
                "",
                "advertisingWindow",
                "width=500,height=400,left=300,top=100,scrollbars=yes"
            );
            
            if (!adWindow) {
                alert("Please allow popups for this site!");
                return;
            }
            
            // Fetch products from fake API using XMLHttpRequest
            var xhr = new XMLHttpRequest();
            xhr.open("GET", "https://dummyjson.com/products", true);
            
            xhr.onload = function() {
                if (xhr.status === 200) {
                    var response = JSON.parse(xhr.responseText);
                    var products = response.products;
                    
                    // Build HTML content
                    var htmlContent = "<html><head>";
                    htmlContent += "<style>";
                    htmlContent += "body { font-family: Arial; margin: 20px; }";
                    htmlContent += ".product { border: 2px solid #333; padding: 15px; margin: 15px 0; }";
                    htmlContent += ".product h3 { color: #d9534f; }";
                    htmlContent += ".product img { width: 100px; height: 100px; }";
                    htmlContent += ".price { font-size: 20px; color: green; font-weight: bold; }";
                    htmlContent += "</style></head><body>";
                    
                    htmlContent += "<h1>Special Offers - Scroll to See More!</h1>";
                    
                    // Add products
                    for (var i = 0; i < products.length; i++) {
                        htmlContent += "<div class='product'>";
                        htmlContent += "<h3>" + products[i].title + "</h3>";
                        htmlContent += "<img src='" + products[i].thumbnail + "' alt='Product'>";
                        htmlContent += "<p>" + products[i].description + "</p>";
                        htmlContent += "<p class='price'>$" + products[i].price + "</p>";
                        htmlContent += "<p>Rating: " + products[i].rating + " ‚≠ê</p>";
                        htmlContent += "</div>";
                    }
                    
                    htmlContent += "</body></html>";
                    
                    // Write content to window
                    adWindow.document.open();
                    adWindow.document.write(htmlContent);
                    adWindow.document.close();
                } else {
                    adWindow.document.write("<h2>Error loading products!</h2>");
                }
            };
            
            xhr.onerror = function() {
                adWindow.document.write("<h2>Network error!</h2>");
            };
            
            xhr.send();
        }
    </script>
</body>
</html>